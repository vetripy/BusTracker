{% extends 'tracker/base.html' %}
{% load static %}

{% block js %}
{% endblock %}

{% block content %}
    <div class="welcome-content">
        <h2 class="welcome-item display-2">
            Never miss your bus again
        </h2>
        <h2 class="welcome-item display-1">
            Track your bus here...
        </h2>
        <div class="route-selecter">
            {{ form.route  }}
            <button id="get-route" class="btn submit-btn location-btn">Get Location</button>
        </div>
    </div>
    <div id="map">

    </div>
    <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCw0ddIErnntB_jNO1mEbWTg7tZya699cQ&libraries=places"></script>
    <script defer>

        const getRoute = document.getElementById('get-route');
        getRoute.onclick = () => {
            const route = document.getElementById('routeNo');
            console.log(route.value);
        }

        const SSN = { lat: 12.751817768930716, lng: 80.20390072611363 };
        const map = new google.maps.Map(document.getElementById("map"), {
                zoom: 13,
                center: SSN
            });

        function calcRoute (slat, slng){
            const source = { lat: slat, lng: slng}

            const map = new google.maps.Map(document.getElementById("map"), {
                zoom: 10,
                center: source,
            });

            let directionService = new google.maps.DirectionsService();
            let directionsRenderer = new google.maps.DirectionsRenderer({suppressMarkers: true });

            request = {
                origin: source,
                destination: SSN,
                travelMode: 'DRIVING'
            };
            directionService.route(request, (result, status) => {
                if (status == 'OK') {
                    directionsRenderer.setDirections(result);
                }
            });
            directionsRenderer.setMap(map);
        };
    </script>

{% endblock %}
